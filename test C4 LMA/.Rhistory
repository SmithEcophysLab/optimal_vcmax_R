setwd("~/Git/NutNetPhys/Analysis")
#### soil N effects on leaf traits (Narea and chi) ####
### load data
leaf <- read.csv('../Data/processed/traits_v2.csv')
## turn treatment numbers into factors
leaf$Ntrt_fac <- as.factor(leaf$Ntrt)
leaf$Ptrt_fac <- as.factor(leaf$Ptrt)
leaf$Ktrt_fac <- as.factor(leaf$Ktrt)
leaf$block_fac <- as.factor(leaf$block)
## scale temperature data
leaf$tmp_scaled <- leaf$tmp - 25
## assign plant functional groups
leaf$pft <- leaf$functional_group
leaf$pft[leaf$pft == 'NULL'] <- NA
leaf$grass <- 'no'
leaf$grass[leaf$pft == 'GRASS'] <- 'yes'
leaf$fence <- 'no'
leaf$fence[leaf$trt == 'Fence' | leaf$trt == 'NPK+Fence'] <- 'yes'
## create subset of data where chi is greater than 0.2 and less than 0.95
leaf_chi_subset = subset(leaf, chi > 0.2 & chi < 0.95) # lose 700 points
View(leaf_chi_subset)
setwd("~/Git/optimal_vcmax_R/test C4 LMA")
nutnet <- read.csv('/NutNet_traits.csv')
nutnet <- read.csv('NutNet_traits.csv')
## load model
source('../calc_optimal_vcmax.R')
sourceDirectory('../functions', modifiedOnly = FALSE)
View(nutnet)
model_output <- calc_optimal_vcmax(tg_c = nutnet$tmp,
z = nutnet$z,
vpdo = nutnet$vpd,
paro = nutnet$par,
f = 0.5,
cao = 391)
nutnet <- read.csv('NutNet_traits.csv')
## load model
source('../calc_optimal_vcmax.R')
sourceDirectory('../functions', modifiedOnly = FALSE)
model_output <- calc_optimal_vcmax(tg_c = nutnet$tmp,
z = nutnet$z,
vpdo = nutnet$vpd,
paro = nutnet$par,
f = 0.5,
cao = 391)
model_output <- calc_optimal_vcmax(tg_c = nutnet$tmp,
z = nutnet$z,
vpdo = nutnet$vpd,
paro = nutnet$par,
# f = 0.5,
cao = 391)
model_output <- calc_optimal_vcmax(tg_c = nutnet$tmp,
z = nutnet$z,
vpdo = nutnet$vpd,
paro = nutnet$par,
f = .5,
cao = 391)
nutnet$f <- 0.5
model_output <- calc_optimal_vcmax(tg_c = nutnet$tmp,
z = nutnet$z,
vpdo = nutnet$vpd,
paro = nutnet$par,
f = nutnet$f,
cao = 391)
nutnet <- read.csv('NutNet_traits.csv')
## load model
source('../calc_optimal_vcmax.R')
sourceDirectory('../functions', modifiedOnly = FALSE)
nutnet$cao <- 391
model_output <- calc_optimal_vcmax(tg_c = nutnet$tmp,
z = nutnet$z,
vpdo = nutnet$vpd,
paro = nutnet$par,
cao = 391)
View(model_output)
nutnet$lma_pred <- model_output$lma
ggplot(nutnet, aes(lma, lma_pred))
library(ggplot2)
ggplot(nutnet, aes(lma, lma_pred))
ggplot(nutnet, aes(lma, lma_pred)) + geom_point()
View(nutnet)
ggplot(nutnet, aes(lma, lma_pred)) + geom_point(aes(color = photosynthetic_pathway))
View(nutnet)
library(ggplot2)
nutnet <- read.csv('NutNet_traits.csv')
## load model
source('../calc_optimal_vcmax.R')
sourceDirectory('../functions', modifiedOnly = FALSE)
model_output <- calc_optimal_vcmax(tg_c = nutnet$tmp,
z = nutnet$z,
vpdo = nutnet$vpd,
paro = nutnet$par,
cao = 391)
nutnet$lma_pred <- model_output$lma
ggplot(nutnet, aes(lma, lma_pred)) + geom_point(aes(color = photosynthetic_pathway))
ggplot(nutnet, aes(lma_pred, lma)) + geom_point(aes(color = photosynthetic_pathway))
